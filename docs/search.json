[{"path":"index.html","id":"computational-text-analysis","chapter":"“Computational Text Analysis”","heading":"“Computational Text Analysis”","text":" dedicated site course PS9594A: “Computational Text Analysis” Western University, taught Sebastián Vallejo Vera. week, find code, exercises, slides corresponding topic.start, check required software packages . Also, don’t forget read Syllabus Perusall readings course. site corrected/updated throughout semester.","code":""},{"path":"index.html","id":"software-and-packages","chapter":"“Computational Text Analysis”","heading":"0.1 Software and Packages","text":"first part course (Weeks 1 - 5), mainly using R. second part course (Weeks 6 - 11), use combination R Python. assume familiar R language, RStudio, R packages. , please come office hours can help out1. R main packages, need following packages installed:tidyverse (piping)tidylog (helps keep track pipins)tidytext (great working text)quanteda (stands “Quantitative Analysis Textual Data”)gutenbergr (download texts Project Gutenberg)wesanderson (make things pretty)","code":""},{"path":"index.html","id":"datasets","chapter":"“Computational Text Analysis”","heading":"0.2 Datasets","text":"Throughout class, using number sample datasets. Access datasets provided directly code. Final Essay, can use one following datasets (, even better, can use ):data 1 + linkdata 2 + linkdata 3 + link","code":""},{"path":"index.html","id":"acknowledgments","chapter":"“Computational Text Analysis”","heading":"0.3 Acknowledgments","text":"organization first part course (Weeks 1 - 5) format assignments borrowed Christopher Barrie’s excellent course “Computational Text Analysis”, syllabus prolific Tiago Ventura, Grimmer, Roberts, Stewart’s excellent book, “Text data: new framework machine learning social sciences”. code used throughout course patchwork code, code borrows heavily internet (’s true code). try best give credit original authors code (possible).","code":""},{"path":"week-1-a-primer-on-using-text-as-data.html","id":"week-1-a-primer-on-using-text-as-data","chapter":"1 Week 1: A Primer on Using Text as Data","heading":"1 Week 1: A Primer on Using Text as Data","text":"","code":""},{"path":"week-1-a-primer-on-using-text-as-data.html","id":"setup","chapter":"1 Week 1: A Primer on Using Text as Data","heading":"1.1 Setup","text":"first example, replicate (extend) Mendenhall’s (1887) Mendenhall’s (1901) studies word-length distribution.First load packages ’ll using:","code":"\nlibrary(tidyverse) # for wrangling data\nlibrary(tidylog) # to know what we are wrangling\nlibrary(tidytext) # for 'tidy' manipulation of text data\nlibrary(wesanderson) # to prettify\nlibrary(gutenbergr) # to get some books\nlibrary(kableExtra) # for displaying data in html format (relevant for formatting this worksheet mainly)"},{"path":"week-1-a-primer-on-using-text-as-data.html","id":"get-data","chapter":"1 Week 1: A Primer on Using Text as Data","heading":"1.2 Get Data","text":"Mendenhall (1887) argued “every writer makes use vocabulary peculiar , character materially change year \nyear productive,” one characteristics length words. Mendenhall (1901) takes , suggests , given assumption, Shakespeare Bacon person2.Let’s get corpus–collection documents–can analyze. can search Gutenberg repository create corpus selected work.’s lot Wilde! Let’s focus four plays: “Importance Earnest”, “Woman Importance”, “Lady Windermere’s Fan”, “Ideal Husband”. can download plays using ID number:unit analysis something like line. interested word–also known tokens–lengths. clean unwanted text–text add noise analysis–count number words.Now, can change unit analysis token:’s lot words! know create column word length, count number words length (play!).Let’s see distribution play:problem. ?solution (proposed Mendenhall):look . Mendenhall something: author mark terms word length distribution. Wilde, observable change across time (play published different years). , happens compare Wilde’s mark Shakespeare’s? Let’s choose four plays plays (random) Shakespeare: Midsummer Night’s Dream, Merchant Venice, Much Ado Nothing, Tempest.text cleaner Wilde’s corpus, leave . Also, harder systematically remove name person speaking. problem? ? ?can put together corpora see differences distributions word length.differences? can conclude evidence? limitations approach? alternative approaches study Mendenhall getting ?","code":"\ngutenberg_metadata %>%\n  filter(author == \"Wilde, Oscar\")## # A tibble: 66 × 8\n##    gutenberg_id title    author gutenberg_author_id language gutenberg_bookshelf\n##           <int> <chr>    <chr>                <int> <chr>    <chr>              \n##  1          174 The Pic… Wilde…                 111 en       \"Gothic Fiction/Mo…\n##  2          301 The Bal… Wilde…                 111 en       \"\"                 \n##  3          773 Lord Ar… Wilde…                 111 en       \"Contemporary Revi…\n##  4          774 Essays … Wilde…                 111 en       \"\"                 \n##  5          790 Lady Wi… Wilde…                 111 en       \"\"                 \n##  6          844 The Imp… Wilde…                 111 en       \"Plays\"            \n##  7          854 A Woman… Wilde…                 111 en       \"Plays\"            \n##  8          873 A House… Wilde…                 111 en       \"Opera\"            \n##  9          875 The Duc… Wilde…                 111 en       \"\"                 \n## 10          885 An Idea… Wilde…                 111 en       \"Plays\"            \n## # ℹ 56 more rows\n## # ℹ 2 more variables: rights <chr>, has_text <lgl>\nwilde <- gutenberg_download(c(790,844, 854, 885), \n                            meta_fields = c(\"title\",\"author\"))\nprint(n=25,wilde[c(51:75),])## # A tibble: 25 × 4\n##    gutenberg_id text                                        title         author\n##           <int> <chr>                                       <chr>         <chr> \n##  1          790 \"\"                                          Lady Winderm… Wilde…\n##  2          790 \"\"                                          Lady Winderm… Wilde…\n##  3          790 \"THE PERSONS OF THE PLAY\"                   Lady Winderm… Wilde…\n##  4          790 \"\"                                          Lady Winderm… Wilde…\n##  5          790 \"\"                                          Lady Winderm… Wilde…\n##  6          790 \"Lord Windermere\"                           Lady Winderm… Wilde…\n##  7          790 \"\"                                          Lady Winderm… Wilde…\n##  8          790 \"Lord Darlington\"                           Lady Winderm… Wilde…\n##  9          790 \"\"                                          Lady Winderm… Wilde…\n## 10          790 \"Lord Augustus Lorton\"                      Lady Winderm… Wilde…\n## 11          790 \"\"                                          Lady Winderm… Wilde…\n## 12          790 \"Mr. Dumby\"                                 Lady Winderm… Wilde…\n## 13          790 \"\"                                          Lady Winderm… Wilde…\n## 14          790 \"Mr. Cecil Graham\"                          Lady Winderm… Wilde…\n## 15          790 \"\"                                          Lady Winderm… Wilde…\n## 16          790 \"Mr. Hopper\"                                Lady Winderm… Wilde…\n## 17          790 \"\"                                          Lady Winderm… Wilde…\n## 18          790 \"Parker, Butler\"                            Lady Winderm… Wilde…\n## 19          790 \"\"                                          Lady Winderm… Wilde…\n## 20          790 \"                                * * * * *\" Lady Winderm… Wilde…\n## 21          790 \"\"                                          Lady Winderm… Wilde…\n## 22          790 \"Lady Windermere\"                           Lady Winderm… Wilde…\n## 23          790 \"\"                                          Lady Winderm… Wilde…\n## 24          790 \"The Duchess of Berwick\"                    Lady Winderm… Wilde…\n## 25          790 \"\"                                          Lady Winderm… Wilde…\nwilde <- wilde %>%\n  # Some housekeeping \n  mutate(title = ifelse(str_detect(title,\"Importance of Being\"),\"The Importance of Being Earnest\", title)) %>%\n  # Filter out all empty rows\n  filter(text != \"\") %>%\n  # This is a play. The name of each character before they speak \n  filter(str_detect(text,\"[A-Z]{3,}\")==FALSE)## mutate: changed 3,884 values (27%) of 'title' (0 new NA)## filter: removed 4,232 rows (29%), 10,303 rows remaining## filter: removed 4,208 rows (41%), 6,095 rows remaining\nprint(n=25,wilde[c(51:75),])## # A tibble: 25 × 4\n##    gutenberg_id text                                                title author\n##           <int> <chr>                                               <chr> <chr> \n##  1          790 \"tea-table L._  _Window opening on to terrace L._ … Lady… Wilde…\n##  2          790 \"home to any one who calls.\"                        Lady… Wilde…\n##  3          790 \"                                                 … Lady… Wilde…\n##  4          790 \"he’s come.\"                                        Lady… Wilde…\n##  5          790 \"hands with you.  My hands are all wet with these … Lady… Wilde…\n##  6          790 \"lovely?  They came up from Selby this morning.\"    Lady… Wilde…\n##  7          790 \"table_.]  And what a wonderful fan!  May I look a… Lady… Wilde…\n##  8          790 \"everything.  I have only just seen it myself.  It… Lady… Wilde…\n##  9          790 \"present to me.  You know to-day is my birthday?\"   Lady… Wilde…\n## 10          790 \"life, isn’t it?  That is why I am giving this par… Lady… Wilde…\n## 11          790 \"down.  [_Still arranging flowers_.]\"               Lady… Wilde…\n## 12          790 \"birthday, Lady Windermere.  I would have covered … Lady… Wilde…\n## 13          790 \"front of your house with flowers for you to walk … Lady… Wilde…\n## 14          790 \"you.\"                                              Lady… Wilde…\n## 15          790 \"                                                 … Lady… Wilde…\n## 16          790 \"Foreign Office.  I am afraid you are going to ann… Lady… Wilde…\n## 17          790 \"with her pocket-handkerchief_, _goes to tea-table… Lady… Wilde…\n## 18          790 \"Won’t you come over, Lord Darlington?\"             Lady… Wilde…\n## 19          790 \"miserable, Lady Windermere.  You must tell me wha… Lady… Wilde…\n## 20          790 \"table L._]\"                                        Lady… Wilde…\n## 21          790 \"whole evening.\"                                    Lady… Wilde…\n## 22          790 \"that the only pleasant things to pay _are_ compli… Lady… Wilde…\n## 23          790 \"things we _can_ pay.\"                              Lady… Wilde…\n## 24          790 \"You mustn’t laugh, I am quite serious.  I don’t l… Lady… Wilde…\n## 25          790 \"don’t see why a man should think he is pleasing a… Lady… Wilde…\nwilde_words <- wilde %>%\n  # take the column text and divide it by words\n  unnest_tokens(word, text) %>%\n  # Remove some characters that add noise\n  mutate(word = str_remove_all(word, \"\\\\_\")) ## mutate: changed 1,225 values (2%) of 'word' (0 new NA)\nwilde_words## # A tibble: 60,465 × 4\n##    gutenberg_id title                 author       word     \n##           <int> <chr>                 <chr>        <chr>    \n##  1          790 Lady Windermere's Fan Wilde, Oscar by       \n##  2          790 Lady Windermere's Fan Wilde, Oscar sixteenth\n##  3          790 Lady Windermere's Fan Wilde, Oscar edition  \n##  4          790 Lady Windermere's Fan Wilde, Oscar first    \n##  5          790 Lady Windermere's Fan Wilde, Oscar published\n##  6          790 Lady Windermere's Fan Wilde, Oscar 1893     \n##  7          790 Lady Windermere's Fan Wilde, Oscar first    \n##  8          790 Lady Windermere's Fan Wilde, Oscar issued   \n##  9          790 Lady Windermere's Fan Wilde, Oscar by       \n## 10          790 Lady Windermere's Fan Wilde, Oscar methuen  \n## # ℹ 60,455 more rows\nwilde_words_ct <- wilde_words %>%\n  # Length of each word\n  mutate(word_length = str_length(word)) %>%\n  # Group by word_length and count how many \n  group_by(word_length,title) %>%\n  mutate(total_word_length = n()) %>%\n  # Keep relevant\n  distinct(word_length,title,.keep_all=T) %>%\n  select(word_length,title,author,total_word_length)## mutate: new variable 'word_length' (integer) with 17 unique values and 0% NA## group_by: 2 grouping variables (word_length, title)## mutate (grouped): new variable 'total_word_length' (integer) with 58 unique values and 0% NA## distinct (grouped): removed 60,403 rows (>99%), 62 rows remaining## select: dropped 2 variables (gutenberg_id, word)\nwilde_words_ct %>%\n  ggplot(aes(y=total_word_length,x=word_length,color=title)) +\n  geom_point(alpha=0.8) +\n  geom_line(alpha=0.8) +\n  scale_color_manual(values = wes_palette(\"Royal2\")) +\n  theme_minimal() +\n  theme(legend.position = \"right\") +\n  labs(x=\"Length\", y = \"Total Number of Words\", color = \"\")\nwilde_words %>%\n  group_by(title) %>%\n  slice_sample(n=10000) %>%\n  mutate(word_length = str_length(word),\n         median_word_length = median(word_length)) %>%\n  group_by(word_length,title) %>%\n  mutate(total_word_length = n()) %>%\n  distinct(word_length,title,.keep_all=T) %>%\n  select(word_length,title,author,total_word_length,median_word_length) %>%\n  ggplot(aes(y=total_word_length,x=word_length,color=title)) +\n  geom_point(alpha=0.8) +\n  geom_line(alpha=0.8) +\n  geom_vline(aes(xintercept = median_word_length,color=title,linetype = title))+\n  scale_color_manual(values = wes_palette(\"Royal2\")) +\n  theme_minimal() +\n  theme(legend.position = \"right\") +\n  labs(x=\"Length\", y = \"Total Number of Words\", color = \"\", linetype = \"\",\n       caption = \"Note: Line type shows median word length.\")## group_by: one grouping variable (title)## slice_sample (grouped): removed 20,465 rows (34%), 40,000 rows remaining## mutate (grouped): new variable 'word_length' (integer) with 17 unique values and 0% NA##                   new variable 'median_word_length' (double) with one unique value and 0% NA## group_by: 2 grouping variables (word_length, title)## mutate (grouped): new variable 'total_word_length' (integer) with 55 unique values and 0% NA## distinct (grouped): removed 39,938 rows (>99%), 62 rows remaining## select: dropped 2 variables (gutenberg_id, word)\nshakes <- gutenberg_download(c(1520,2242,2243,2235),\n                             meta_fields = c(\"title\",\"author\"))\nprint(n=25,shakes[c(51:75),])## # A tibble: 25 × 4\n##    gutenberg_id text                                                title author\n##           <int> <chr>                                               <chr> <chr> \n##  1         1520 \"Leon.\"                                             Much… Shake…\n##  2         1520 \"How many gentlemen have you lost in this action?\"  Much… Shake…\n##  3         1520 \"\"                                                  Much… Shake…\n##  4         1520 \"Mess.\"                                             Much… Shake…\n##  5         1520 \"But few of any sort, and none of name.\"            Much… Shake…\n##  6         1520 \"\"                                                  Much… Shake…\n##  7         1520 \"Leon.\"                                             Much… Shake…\n##  8         1520 \"A victory is twice itself when the achiever bring… Much… Shake…\n##  9         1520 \"numbers.  I find here that Don Pedro hath bestowe… Much… Shake…\n## 10         1520 \"a young Florentine, called Claudio.\"               Much… Shake…\n## 11         1520 \"\"                                                  Much… Shake…\n## 12         1520 \"Mess.\"                                             Much… Shake…\n## 13         1520 \"Much deserved on his part, and equally remembered… Much… Shake…\n## 14         1520 \"He hath borne himself beyond the promise of his a… Much… Shake…\n## 15         1520 \"in the figure of a lamb, the feats of a lion: he … Much… Shake…\n## 16         1520 \"better bettered expectation than you must expect … Much… Shake…\n## 17         1520 \"you how.\"                                          Much… Shake…\n## 18         1520 \"\"                                                  Much… Shake…\n## 19         1520 \"Leon.\"                                             Much… Shake…\n## 20         1520 \"He hath an uncle here in Messina will be very muc… Much… Shake…\n## 21         1520 \"\"                                                  Much… Shake…\n## 22         1520 \"Mess.\"                                             Much… Shake…\n## 23         1520 \"I have already delivered him letters, and there a… Much… Shake…\n## 24         1520 \"joy in him; even so much that joy could not show … Much… Shake…\n## 25         1520 \"enough without a badge of bitterness.\"             Much… Shake…\nshakes_words <- shakes %>%\n  # Filter out all empty rows\n  filter(text != \"\") %>%\n  # This is a play. The name of each character before they speak \n  filter(str_detect(text,\"[A-Z]{3,}\")==FALSE) %>%\n  # take the column text and divide it by words\n  unnest_tokens(word, text) ## filter: removed 3,088 rows (22%), 11,135 rows remaining## filter: removed 31 rows (<1%), 11,104 rows remaining\n# Bind both word dfs\nwords <- rbind.data.frame(shakes_words,wilde_words)\n\n# Count words etc.\nwords %>%\n  group_by(title,author) %>%\n  slice_sample(n=10000) %>%\n  mutate(word_length = str_length(word),\n         median_word_length = median(word_length)) %>%\n  group_by(word_length,title,author) %>%\n  mutate(total_word_length = n()) %>%\n  distinct(word_length,title,.keep_all=T) %>%\n  select(word_length,title,author,total_word_length,median_word_length) %>%\n  ggplot(aes(y=total_word_length,x=word_length,color=author,group=title)) +\n  geom_point(alpha=0.8) +\n  geom_line(alpha=0.8) +\n  scale_color_manual(values = wes_palette(\"Royal2\")) +\n  # facet_wrap(~author, ncol = 2)+\n  theme_minimal() +\n  theme(legend.position = \"bottom\") +\n  labs(x=\"Length\", y = \"Total Number of Words\", color = \"\", linetype = \"\",\n       caption = \"Note: Median word length is 4 for both.\")## group_by: 2 grouping variables (title, author)## slice_sample (grouped): removed 61,480 rows (43%), 80,000 rows remaining## mutate (grouped): new variable 'word_length' (integer) with 17 unique values and 0% NA##                   new variable 'median_word_length' (double) with one unique value and 0% NA## group_by: 3 grouping variables (word_length, title, author)## mutate (grouped): new variable 'total_word_length' (integer) with 100 unique values and 0% NA## distinct (grouped): removed 79,883 rows (>99%), 117 rows remaining## select: dropped 2 variables (gutenberg_id, word)"},{"path":"cross.html","id":"cross","chapter":"2 Cross-references","heading":"2 Cross-references","text":"Cross-references make easier readers find link elements book.","code":""},{"path":"cross.html","id":"chapters-and-sub-chapters","chapter":"2 Cross-references","heading":"2.1 Chapters and sub-chapters","text":"two steps cross-reference heading:Label heading: # Hello world {#nice-label}.\nLeave label like automated heading generated based heading title: example, # Hello world = # Hello world {#hello-world}.\nlabel un-numbered heading, use: # Hello world {-#nice-label} {# Hello world .unnumbered}.\nLeave label like automated heading generated based heading title: example, # Hello world = # Hello world {#hello-world}.label un-numbered heading, use: # Hello world {-#nice-label} {# Hello world .unnumbered}.Next, reference labeled heading anywhere text using \\@ref(nice-label); example, please see Chapter 2.\nprefer text link instead numbered reference use: text want can go .\nprefer text link instead numbered reference use: text want can go .","code":""},{"path":"cross.html","id":"captioned-figures-and-tables","chapter":"2 Cross-references","heading":"2.2 Captioned figures and tables","text":"Figures tables captions can also cross-referenced elsewhere book using \\@ref(fig:chunk-label) \\@ref(tab:chunk-label), respectively.See Figure 2.1.\nFigure 2.1: nice figure!\nDon’t miss Table 2.1.\nTable 2.1: nice table!\n","code":"\npar(mar = c(4, 4, .1, .1))\nplot(pressure, type = 'b', pch = 19)\nknitr::kable(\n  head(pressure, 10), caption = 'Here is a nice table!',\n  booktabs = TRUE\n)"},{"path":"parts.html","id":"parts","chapter":"3 Parts","heading":"3 Parts","text":"can add parts organize one book chapters together. Parts can inserted top .Rmd file, first-level chapter heading file.Add numbered part: # (PART) Act one {-} (followed # chapter)Add unnumbered part: # (PART\\*) Act one {-} (followed # chapter)Add appendix special kind un-numbered part: # (APPENDIX) stuff {-} (followed # chapter). Chapters appendix prepended letters instead numbers.","code":""},{"path":"footnotes-and-citations.html","id":"footnotes-and-citations","chapter":"4 Footnotes and citations","heading":"4 Footnotes and citations","text":"","code":""},{"path":"footnotes-and-citations.html","id":"footnotes","chapter":"4 Footnotes and citations","heading":"4.1 Footnotes","text":"Footnotes put inside square brackets caret ^[]. Like one 3.","code":""},{"path":"footnotes-and-citations.html","id":"citations","chapter":"4 Footnotes and citations","heading":"4.2 Citations","text":"Reference items bibliography file(s) using @key.example, using bookdown package (Xie 2023) (check last code chunk index.Rmd see citation key added) sample book, built top R Markdown knitr (Xie 2015) (citation added manually external file book.bib).\nNote .bib files need listed index.Rmd YAML bibliography key.RStudio Visual Markdown Editor can also make easier insert citations: https://rstudio.github.io/visual-markdown-editing/#/citations","code":""},{"path":"blocks.html","id":"blocks","chapter":"5 Blocks","heading":"5 Blocks","text":"","code":""},{"path":"blocks.html","id":"equations","chapter":"5 Blocks","heading":"5.1 Equations","text":"equation.\\[\\begin{equation}\n  f\\left(k\\right) = \\binom{n}{k} p^k\\left(1-p\\right)^{n-k}\n  \\tag{5.1}\n\\end{equation}\\]may refer using \\@ref(eq:binom), like see Equation (5.1).","code":""},{"path":"blocks.html","id":"theorems-and-proofs","chapter":"5 Blocks","heading":"5.2 Theorems and proofs","text":"Labeled theorems can referenced text using \\@ref(thm:tri), example, check smart theorem 5.1.Theorem 5.1  right triangle, \\(c\\) denotes length hypotenuse\n\\(\\) \\(b\\) denote lengths two sides, \n\\[^2 + b^2 = c^2\\]Read https://bookdown.org/yihui/bookdown/markdown-extensions--bookdown.html.","code":""},{"path":"blocks.html","id":"callout-blocks","chapter":"5 Blocks","heading":"5.3 Callout blocks","text":"R Markdown Cookbook provides help use custom blocks design callouts: https://bookdown.org/yihui/rmarkdown-cookbook/custom-blocks.html","code":""},{"path":"sharing-your-book.html","id":"sharing-your-book","chapter":"6 Sharing your book","heading":"6 Sharing your book","text":"","code":""},{"path":"sharing-your-book.html","id":"publishing","chapter":"6 Sharing your book","heading":"6.1 Publishing","text":"HTML books can published online, see: https://bookdown.org/yihui/bookdown/publishing.html","code":""},{"path":"sharing-your-book.html","id":"pages","chapter":"6 Sharing your book","heading":"6.2 404 pages","text":"default, users directed 404 page try access webpage found. ’d like customize 404 page instead using default, may add either _404.Rmd _404.md file project root use code /Markdown syntax.","code":""},{"path":"sharing-your-book.html","id":"metadata-for-sharing","chapter":"6 Sharing your book","heading":"6.3 Metadata for sharing","text":"Bookdown HTML books provide HTML metadata social sharing platforms like Twitter, Facebook, LinkedIn, using information provide index.Rmd YAML. setup, set url book path cover-image file. book’s title description also used.gitbook uses social sharing data across chapters book- links shared look .Specify book’s source repository GitHub using edit key configuration options _output.yml file, allows users suggest edit linking chapter’s source file.Read features output format :https://pkgs.rstudio.com/bookdown/reference/gitbook.htmlOr use:","code":"\n?bookdown::gitbook"},{"path":"references.html","id":"references","chapter":"References","heading":"References","text":"","code":""}]
